<!DOCTYPE html>
<html lang="en-US">
 <head>
    <title>motion</title>
   <meta charset="UTF-8">
   <style>
	html, body { height: 100%; margin: 0; }
	body {
		background-color: gray;
	}
   </style>
 </head>
 <body>
 <a id="textId"></a>
 <canvas id="canvas1"></canvas>
  <script>
	alert("1");
	var canvas = document.getElementById("canvas1");
	var ctx = canvas.getContext("2d");
	canvas.height = window.innerHeight;
	canvas.width = window.innerWidth;
	
	
	let x = 0;
	let y = 0;
	let z = 0;
	
	
	function draw(){
		let size = (z + 10) * 5
		
		let pos = {
			x: x * Math.floor(canvas.width / 20) + Math.floor(canvas.width / 2 - size / 2),
			y: y * Math.floor(canvas.height / 20) + Math.floor(canvas.height / 2 - size / 2)
		}
		
		ctx.fillRect(
			pos.x,
			pos.y,
			size,
			size
		);
		
		ctx.font = "40px Consolas";
		ctx.fillText(pos.x + ", " + pos.y + ", " + size + " (" + x + ", " + y + ", " + z + ")", 20, 40);
	}
	
	alert("2");
	
	function handleMotionEvent(event){
		//alert(event.accelerationIncludingGravity);
		
		x = event.accelerationIncludingGravity.x ?? 0;
		y = event.accelerationIncludingGravity.y ?? 0;
		z = event.accelerationIncludingGravity.z ?? 0;
		
		draw();
	}
	window.addEventListener("devicemotion", handleMotionEvent, true);
	
	alert("3");
	/*
	function onResize(){
		canvas.height = window.innerHeight;
		canvas.width = window.innerWidth;
		
		draw();
	}
	window.addEventListener("resize",onResize);
	
	alert("4");
	*/
	document.getElementById("textId").innerHTML = canvas.width + ", " + canvas.height + "; " + " (" + x + ", " + y + ", " + z + ")";
	
	
	alert("5");
	
	draw();
	/*window.onerror = function(msg, url, linenumber) {
		alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber);
		return true;
	}*/
	alert("6");
  </script>
 </body>
</html>
